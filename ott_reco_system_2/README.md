## OTT 추천 시스템 파이프라인

1. **데이터 로드**

    - `train_data.csv`, `ott_price.csv` 파일을 pandas로 읽어옴
    - 콘텐츠 메타데이터(제목, 장르, 세부장르, 연령대, 성별, 평점, 러닝타임 등)
    - OTT 서비스 가격 정보(서비스명, 요금제, 월 구독료)

2. **사용자 입력 받기** (`get_user_input`)

    - 지원 가능한 **base genre** 목록 출력 (영화, 드라마, 예능 등)
    - **base genre**: 콤마로 다중 선택 가능
    - **genre_detail**: 세부 장르 옵션 예시 출력, 콤마로 다중 선택
    - 추가 입력: 연령대, 성별, 주간 시청 시간, 한 달 예산

3. **러닝타임 추정** (`estimate_runtime_hours`)

    - `runtime` 열의 분 단위를 시간으로 환산
    - 드라마·시리즈의 `episodes`를 화수로 인식해, 1화당 1시간 가정
    - 정보가 없으면 기본 1시간

4. **추천 로직** (`recommend`)

    - **필터링 단계 (단계적 완화)**

        1. base genre, 연령대, 성별, 세부장르 모두 매칭(입력한 세부 장르 중 하나 이상에 매칭되면 추천 후보)
        2. 부족 시 → 세부장르 제외
        3. 부족 시 → 성별 제외
        4. 부족 시 → 연령대·성별 제외
        5. 부족 시 → base genre만 매칭
        6. 부족 시 → 전체 콘텐츠 대상

    - **효율 계산**: 평점(score) ÷ 예상 시청시간(watch_hours)
    - **중복 제거**: `title` 기준 중복 제거
    - **콘텐츠 선택** (그리디)

        - 예상 시간 합 ≤ (주간 시청시간 × 4주)
        - 효율 순으로 최대 8개 선택
        - 최소 3개 미만일 경우, 효율 상위 8개 고정 추천

    - **플랫폼 파싱**: 추천된 콘텐츠의 `platform` 열에서 서비스명 추출
    - **요금제 선택**: 각 플랫폼의 최저가 요금제 선택, 총 비용 계산
    - 예산 초과 시 경고 출력

5. **결과 출력**

    - **추천 구독 플랜**: 플랫폼별 요금제 및 월 구독료, 총 구독 비용
    - **추천 콘텐츠**: 최대 8개 콘텐츠의 제목·장르·세부장르·예상 시청시간·평점

---

_참고:_ 현재 구현은 **그리디 기반 효율 최대화** 방식입니다. 즉, 모델보다는 룰 엔진에 가까운 알고리즘 기반입니다. 이후 0-1 knapsack, 강화학습, 협업 필터링 등의 최적화 기법으로 발전시킬 수 있습니다.
